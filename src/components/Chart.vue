<template>
  <canvas id="chart"></canvas>
</template>

<script>
  import Chart from 'chart.js'
  import util from '../util'
  const { chart: {horizonalLinePlugin} } = util
  export default {
    name: 'chart',
    data () {
      return {
        labels: [
          '09:30', '', '', '', '', '', '', '', '', '',
          '09:40', '', '', '', '', '', '', '', '', '',
          '09:50', '', '', '', '', '', '', '', '', '',
          '10:00', '', '', '', '', '', '', '', '', '',
          '10:10', '', '', '', '', '', '', '', '', '',
          '10:20', '', '', '', '', '', '', '', '', '',
          '10:30', '', '', '', '', '', '', '', '', '',
          '10:40', '', '', '', '', '', '', '', '', '',
          '10:50', '', '', '', '', '', '', '', '', '',
          '11:00', '', '', '', '', '', '', '', '', '',
          '11:10', '', '', '', '', '', '', '', '', '',
          '11:20', '', '', '', '', '', '', '', '', '',
          '11:30', '',
          '13:00', '', '', '', '', '', '', '', '', '',
          '13:10', '', '', '', '', '', '', '', '', '',
          '13:20', '', '', '', '', '', '', '', '', '',
          '13:30', '', '', '', '', '', '', '', '', '',
          '13:40', '', '', '', '', '', '', '', '', '',
          '13:50', '', '', '', '', '', '', '', '', '',
          '14:00', '', '', '', '', '', '', '', '', '',
          '14:10', '', '', '', '', '', '', '', '', '',
          '14:20', '', '', '', '', '', '', '', '', '',
          '14:30', '', '', '', '', '', '', '', '', '',
          '14:40', '', '', '', '', '', '', '', '', '',
          '14:50', '', '', '', '', '', '', '', '', '',
          '15:00', '', '', ''
        ],
        chartData: [
          0.6925,
          0.6916,
          0.6913,
          0.6909,
          0.6914,
          0.6913,
          0.6912,
          0.6910,
          0.6908,
          0.6906,
          0.6901,
          0.6901,
          0.6904,
          0.6905,
          0.6908,
          0.6907,
          0.6908,
          0.6907,
          0.6906,
          0.6906,
          0.6905,
          0.6905,
          0.6902,
          0.6903,
          0.6906,
          0.6909,
          0.6913,
          0.6914,
          0.6917,
          0.6914,
          0.6915,
          0.6914,
          0.6913,
          0.6913,
          0.6912,
          0.6911,
          0.6911,
          0.6911,
          0.6911,
          0.6911,
          0.6912,
          0.6912,
          0.6910,
          0.6908,
          0.6907,
          0.6909,
          0.6911,
          0.6911,
          0.6912,
          0.6912,
          0.6913,
          0.6916,
          0.6915,
          0.6914,
          0.6914,
          0.6913,
          0.6913,
          0.6913,
          0.6913,
          0.6911,
          0.6910,
          0.6909,
          0.6907,
          0.6906,
          0.6906,
          0.6907,
          0.6908,
          0.6909,
          0.6910,
          0.6909,
          0.6908,
          0.6908,
          0.6907,
          0.6907,
          0.6907,
          0.6907,
          0.6905,
          0.6906,
          0.6906,
          0.6905,
          0.6901,
          0.6900,
          0.6899,
          0.6896,
          0.6894,
          0.6895,
          0.6895,
          0.6898,
          0.6898,
          0.6897,
          0.6896,
          0.6896,
          0.6896,
          0.6897,
          0.6897,
          0.6899,
          0.6900,
          0.6897,
          0.6894,
          0.6889,
          0.6886,
          0.6888,
          0.6889,
          0.6889,
          0.6890,
          0.6890,
          0.6891,
          0.6892,
          0.6894,
          0.6895,
          0.6898,
          0.6897,
          0.6897,
          0.6899,
          0.6899,
          0.6898,
          0.6899,
          0.6898,
          0.6899,
          0.6899,
          0.6900,
          0.6900,
          0.6900,
          0.6901,
          0.6899,
          0.6899,
          0.6897,
          0.6898,
          0.6898,
          0.6898

        ],
        chartInstance: {}
      }
    },
    props: ['chart-data', 'value'],
    mounted () {
      const config = {
        type: 'line',
        data: {
          labels: this.labels,
          datasets: [{
            label: '当前估值',
            backgroundColor: 'rgb(54, 162, 235)',
            borderColor: 'rgb(54, 162, 235)',
            data: this.chartData,
            fill: false
          }]
        },
        options: {
          responsive: true,
          title: {
            display: true,
            text: '净值走势'
          },
          tooltips: {
            mode: 'index',
            intersect: false
          },
          hover: {
            mode: 'nearest',
            intersect: true
          },
          horizontalLine: [{
            y: 0.69,
            style: 'rgba(255, 0, 0, .4)',
            text: '昨日净值0.69'
          }]
        }
      }
      // 加载插件
      Chart.pluginService.register(horizonalLinePlugin)
      // 创建图表
      const ctx = document.getElementById('chart')
      this.chartInstance = new Chart(ctx, config)
    }
  }
</script>
